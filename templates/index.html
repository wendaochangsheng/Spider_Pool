{% extends "base.html" %}
{% block title %}内容矩阵 · {{ host }}{% endblock %}
{% block content %}
<section class="hero">
  <div>
    <p class="label">{{ host }}</p>
    <h2>蜘蛛池观测面板</h2>
    <p>自动生成长文、动态互链与外链曝光，一站式对齐真实蜘蛛池的运行状态。</p>
    <div class="badges">
      <span>默认关键词：{{ pool_settings.default_keywords | join(' · ') if pool_settings.default_keywords else '未设置' }}</span>
      <span>批量生成：{{ pool_settings.auto_page_count or 12 }}/次</span>
    </div>
  </div>
  <div class="hero-actions">
    <a href="/admin" class="button">进入后台</a>
    <a href="/admin/login" class="button ghost">管理员登录</a>
  </div>
</section>

<section class="summary-grid">
  <div class="stat-card">
    <p class="muted">页面节点</p>
    <strong>{{ page_total }}</strong>
    <small>自动生成长文并互链</small>
  </div>
  <div class="stat-card">
    <p class="muted">域名池</p>
    <strong>{{ domain_list|length }}</strong>
    <small>当前注册域名数量</small>
  </div>
  <div class="stat-card">
    <p class="muted">访问累计</p>
    <strong>{{ stats.values()|sum }}</strong>
    <small>即时统计，辅助调整投放</small>
  </div>
  <div class="stat-card">
    <p class="muted">外链池</p>
    <strong>{{ external_links|length }}</strong>
    <small>动态曝光的外部链接</small>
  </div>
</section>

<section class="grid">
  {% for page in pages %}
    <article class="card">
      <div class="card-header">
        <p class="label subtle">{{ page.host }}</p>
        <span class="chip">{{ page.generator or '模板' }}</span>
      </div>
      <h3><a href="/p/{{ page.slug }}">{{ page.title or page.topic or page.slug }}</a></h3>
      <p>{{ page.excerpt or '动态内容节点' }}</p>
      <div class="meta">更新：{{ page.updated_at or '未知' }}</div>
    </article>
  {% else %}
    <p>暂无内容，可在后台快速生成。</p>
  {% endfor %}
</section>

<section class="panel">
  <h3>访问速览</h3>
  <ul class="list two-col">
    {% for slug, count in stats.items() %}
      <li><strong>{{ slug }}</strong> · {{ count }} 次访问</li>
    {% else %}
      <li>暂无统计，等待后续访问。</li>
    {% endfor %}
  </ul>
</section>

<section class="panel">
  <div class="panel-header">
    <h3>动态外链池</h3>
    <p class="muted">后台录入的外链将实时随机曝光，无需重新生成页面。</p>
  </div>
  <div class="link-grid">
    {% for item in external_links %}
      <a class="link-chip" href="{{ item.url }}" target="_blank" rel="nofollow noopener">{{ item.label }}</a>
    {% else %}
      <p class="muted">暂无外链，可在后台添加曝光链接。</p>
    {% endfor %}
  </div>
</section>
{% endblock %}
